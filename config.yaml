# config.yaml
# Voice assistant global configuration
# Environment variable placeholder syntax: ${ENV_VAR_NAME:default_value}

# MCP服务器配置（支持多个服务器）
mcp_servers:
  # 服务器1：SSE类型
  smart_home:
    type: "sse"
    url: "http://mininas:8123/mcp_server/sse"
    headers:
      Authorization: "${MCP_AUTH_TOKEN}"

  wake_on_lan_server:
    type: "stdio"
    command: "python"
    args: ["my_mcp_servers/wol_mcp_server/wol.py"]

# LLM configuration
llm:
  api_key: "${DEEPSEEK_API_KEY}"
  base_url: "https://api.deepseek.com"
  model: "deepseek-chat"
  temperature: 0.7

# System prompt
system_prompt: "你是一个智能家居语音助手。你的回答必须只有一两句话且口语化，适合语音播报。你可以使用以下MCP服务器提供的工具：- smart_home: 控制智能家居设备 - wake_on_lan_server: 远程唤醒电脑，我的台式机MAC地址是 04-7C-16-4E-C3-F3。"

# STT (Speech-to-Text) configuration
stt:
  url: "https://api.siliconflow.cn/v1/audio/transcriptions"
  model: "FunAudioLLM/SenseVoiceSmall"
  api_key: "${SILICONFLOW_API_KEY}"

# TTS (Text-to-Speech) configuration
tts:
  api_key: "${SILICONFLOW_API_KEY}"
  base_url: "https://api.siliconflow.cn/v1"
  model: "FunAudioLLM/CosyVoice2-0.5B"
  voice: "FunAudioLLM/CosyVoice2-0.5B:diana"
  sample_rate: 44100

# Voice listener configuration
voice_listener:
  wake_word_model_path: "${WAKE_WORD_MODEL_PATH:hey jarvis}"
  channels: 1
  rate: 16000
  chunk: 1280
  vad_frame_ms: 30
  wake_word_threshold: 0.5
  silence_limit_seconds: 1.5
  min_record_seconds: 0.5

# Process configuration
process:
  queue_size: 5


# 工具选择配置
tool_selection:
  top_k: 10  # 每次选择最相关的3个工具
  use_vector_search: true  # 启用向量搜索
  # Embedding API配置
  embedding:
    url: "https://api.siliconflow.cn/v1/embeddings"
    model: "BAAI/bge-m3"
    api_key: "${SILICONFLOW_API_KEY}"
    dimensions: 1024  # 向量维度
    timeout: 10  # 请求超时时间，单位秒

# 上下文管理配置
context:
  max_turns: 10  # 最大保存3个回合（用户+助手为一回合）
  max_time_minutes: 30  # 上下文过期时间30分钟

# 高级配置（可选）
advanced:
  # 工具调用重试配置
  tool_retry:
    max_attempts: 3
    delay_seconds: 1
  
  # 性能监控
  monitoring:
    enable: true
    stats_interval_turns: 5  # 每5轮输出一次统计信息
  
  # 日志级别
  log_level: "INFO"
